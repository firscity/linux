# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
# Copyright (C) 2022 Renesas Electronics Corp.
%YAML 1.2
---
$id: http://devicetree.org/schemas/pci/rcar-gen4-pci-host.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Renesas R-Car Gen5 PCIe 4.0 Host

maintainers:
  - Tin Tran <tin.tran.xk@renesas.com>

allOf:
  - $ref: snps,dw-pcie.yaml#

properties:
  compatible:
    items:
      - const: renesas,rcar-gen5-pcie  # R-Car Gen5

  interrupts:
    maxItems: 7

  clocks:
    maxItems: 1

  power-domains:
    maxItems: 1

  resets:
    maxItems: 1

required:
  - compatible
  - reg
  - interrupts
  - clocks
  - power-domains

unevaluatedProperties: false

examples:

        pciec0: pcie@C9C8E000 {
		compatible = "renesas,rcar-gen5-pcie";
		reg = <0 0xC9C8E000 0 0x3000>,
		      <0 0xC9C91000 0 0x2000>,
		      <0 0xC9C93000 0 0x1200>,
		      <0 0xC9C94200 0 0x0e00>,
		      <0 0xC9C95000 0 0x1000>,
		      <0 0xC9000000 0 0x100000>;
		reg-names = "dbi",
			    "atu",
			    "dma",
			    "app",
			    "phy",
			    "config";
		#address-cells = <3>;
		#size-cells = <2>;
		bus-range = <0x00 0xff>;
		device_type = "pci";
		ranges =  <0x03000000 0x1 0x0000000 0x1 0x00000000 0 0x20000000>;
		interrupts = <0 360 4>,
			     <0 361 4>,
			     <0 370 4>,
			     <0 370 4>,
			     <0 370 4>,
			     <0 363 4>,
			     <0 362 4>;
		#interrupt-cells = <1>;
		interrupt-map-mask = <0 0 0 7>;
		interrupt-map = <0 0 0 1 &gic 0 0x38000000 0 360 4
				 0 0 0 2 &gic 0 0x38000000 0 361 4
				 0 0 0 3 &gic 0 0x38000000 0 370 4
				 0 0 0 4 &gic 0 0x38000000 0 370 4
				 0 0 0 4 &gic 0 0x38000000 0 370 4
				 0 0 0 4 &gic 0 0x38000000 0 363 4
				 0 0 0 4 &gic 0 0x38000000 0 362 4>;
		clocks = <&pcie_bus_clk>;
		clock-names = "pcie_bus";
		num-lanes = <2>;
		max-link-speed = <4>;
		status = "okay";
	};
